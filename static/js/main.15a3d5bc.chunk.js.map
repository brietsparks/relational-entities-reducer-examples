{"version":3,"sources":["example1/schema.js","example1/state.js","example1/dom/FixedScroll.js","example1/dom/Icons.js","example1/dom/Comment.js","example1/dom/Comments.js","example1/dom/Post.js","example1/dom/Posts.js","example1/dom/State.js","example1/dom/Example.js","example1/index.js","store.js","App.js","index.js"],"names":["modelSchema","post","many","comment","one","modelActions","createActions","addEntity","add","removeEntity","remove","editEntity","edit","reorderEntity","modelReducer","createReducer","reducer","combineReducers","model","getEntityIds","state","_ref","entityType","selectors","getIds","getEntity","_ref2","entityId","FixedScroll","title","children","react_default","a","createElement","style","height","overflow","border","defaultStyle","cursor","Remove","onClick","_ref$style","Object","objectSpread","MoveUp","_ref2$style","MoveDown","_ref3","_ref3$style","Connected","connect","id","dispatch","changes","_ref$body","body","onChangeBody","useCallback","e","target","value","onChange","placeholder","width","minHeight","Icons_Remove","position","postId","addComment","uuid","_ref$ids","ids","map","dom_Comment","key","Field","Form","Label","Control","Input","Textarea","index","decrementIndex","incrementIndex","_ref$title","_ref$commentIds","commentIds","onChangeTitle","dist","Content","Icons_MoveUp","Icons_MoveDown","right","marginRight","type","concat","name","marginLeft","dom_Comments","addPost","dom_FixedScroll","dom_Post","fullwidth","color","JSON","stringify","Column","dom_Posts","dom_State","store","initialState","arguments","length","undefined","createStore","composeWithDevTools","applyMiddleware","apply","Example1","es","dom_Example","App","example1","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"uOACaA,EAAc,CACzBC,KAAM,CACJC,KAAM,CAAC,YAETC,QAAS,CACPC,IAAK,CAAC,iBCGJC,EAAeC,wBAAcN,GACtBO,EAAYF,EAAaG,IACzBC,EAAeJ,EAAaK,OAC5BC,EAAaN,EAAaO,KAC1BC,EAAgBR,EAAaQ,cAGpCC,EAAeC,wBAAcf,EAAaK,GAEnCW,EAAUC,0BAAgB,CACrCC,MAAOJ,IAIIK,EAAe,SAACC,EAADC,GAA2B,IAAjBC,EAAiBD,EAAjBC,WACpC,OAAOC,YAAUC,OAAOJ,EAAMF,MAAO,CAAEI,gBAG5BG,EAAY,SAACL,EAADM,GAAqC,IAA3BJ,EAA2BI,EAA3BJ,WAAYK,EAAeD,EAAfC,SAC7C,OAAOJ,YAAUE,UAAUL,EAAMF,MAAO,CAAEI,aAAYK,qCCRzCC,EAlBK,SAAAP,GAAyB,IAAtBQ,EAAsBR,EAAtBQ,MAAOC,EAAeT,EAAfS,SAO5B,OACEC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAKJ,GAELE,EAAAC,EAAAC,cAAA,OAAKC,MAVK,CACZC,OAAQ,OACRC,SAAU,OACVC,OAAQ,mBAQHP,YCZHQ,EAAe,CACnBC,OAAQ,WAGGC,EAAS,SAAAnB,GAAA,IAAGoB,EAAHpB,EAAGoB,QAAHC,EAAArB,EAAYa,aAAZ,IAAAQ,EAAoB,GAApBA,EAAA,OACpBX,EAAAC,EAAAC,cAAA,QAAMQ,QAASA,EAASP,MAAKS,OAAAC,EAAA,EAAAD,CAAA,GAAOL,EAAiBJ,IAArD,SAEWW,EAAS,SAAAnB,GAAA,IAAGe,EAAHf,EAAGe,QAAHK,EAAApB,EAAYQ,aAAZ,IAAAY,EAAoB,GAApBA,EAAA,OACpBf,EAAAC,EAAAC,cAAA,QAAMQ,QAASA,EAASP,MAAKS,OAAAC,EAAA,EAAAD,CAAA,GAAOL,EAAiBJ,IAArD,WAEWa,EAAW,SAAAC,GAAA,IAAGP,EAAHO,EAAGP,QAAHQ,EAAAD,EAAYd,aAAZ,IAAAe,EAAoB,GAApBA,EAAA,OACtBlB,EAAAC,EAAAC,cAAA,QAAMQ,QAASA,EAASP,MAAKS,OAAAC,EAAA,EAAAD,CAAA,GAAOL,EAAiBJ,IAArD,WCsBagB,EAVGC,YAChB,SAAC/B,EAADM,GAAA,IAAU0B,EAAV1B,EAAU0B,GAAV,OAAAT,OAAAC,EAAA,EAAAD,CAAA,GACKlB,EAAUL,EAAO,CAAEE,WAAY,UAAWK,SAAUyB,MAEzD,SAACC,EAADL,GAAA,IAAaI,EAAbJ,EAAaI,GAAb,MAAuB,CACrBxC,KAAM,SAAC0C,GAAD,OAAaD,EAAS1C,EAAW,UAAWyC,EAAIE,KACtD5C,OAAQ,kBAAM2C,EAAS5C,EAAa,UAAW2C,OANjCD,CAnBF,SAAA9B,GAAqCA,EAAlC+B,GAAkC,IAAAG,EAAAlC,EAA9BmC,YAA8B,IAAAD,EAAvB,GAAuBA,EAAnB3C,EAAmBS,EAAnBT,KAAMF,EAAaW,EAAbX,OAChC+C,EAAeC,sBAAY,SAAAC,GAAC,OAAI/C,EAAK,CAAE4C,KAAMG,EAAEC,OAAOC,UAE5D,OACE9B,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,YACE4B,MAAOL,EACPM,SAAUL,EACVM,YAAY,UACZ7B,MAAO,CAAE8B,MAAO,MAAOC,UAAW,GAAI5B,OAAQ,oBAEhDN,EAAAC,EAAAC,cAACiC,EAAD,CACEzB,QAAS/B,EACTwB,MAAO,CAAEiC,SAAU,iBCOZjB,EAPGC,YAChB,KACA,SAACE,EAAD3B,GAAA,IAAa0C,EAAb1C,EAAa0C,OAAb,MAA2B,CACzBC,WAAY,kBAAMhB,EAAS9C,EAAU,UAAW+D,MAAQ,CAAEF,eAH5CjB,CAZD,SAAA9B,GAA8B,IAAAkD,EAAAlD,EAA3BmD,WAA2B,IAAAD,EAArB,GAAqBA,EAAjBF,EAAiBhD,EAAjBgD,WAC5B,OACEtC,EAAAC,EAAAC,cAAA,WACGuC,EAAIC,IAAI,SAAArB,GAAE,OACTrB,EAAAC,EAAAC,cAACyC,EAAD,CAAStB,GAAIA,EAAIuB,IAAKvB,MAGxBrB,EAAAC,EAAAC,cAAA,UAAQQ,QAAS4B,GAAjB,kBCNEO,EAA2CC,OAA3CD,MAAOE,EAAoCD,OAApCC,MAAOC,EAA6BF,OAA7BE,QAASC,EAAoBH,OAApBG,MAAOC,EAAaJ,OAAbI,SAuFvB/B,EAhBGC,YAChB,SAAC/B,EAADM,GAAA,IAAU0B,EAAV1B,EAAU0B,GAAV,OAAAT,OAAAC,EAAA,EAAAD,CAAA,GACKlB,EAAUL,EAAO,CAAEE,WAAY,OAAQK,SAAUyB,MAEtD,SAACC,EAADL,GAAA,IAAaI,EAAbJ,EAAaI,GAAI8B,EAAjBlC,EAAiBkC,MAAjB,MAA8B,CAC5BtE,KAAM,SAAC0C,GAAD,OAAaD,EAAS1C,EAAW,OAAQyC,EAAIE,KACnD5C,OAAQ,kBAAM2C,EAAS5C,EAAa,OAAQ2C,EAAI,CAAC,cACjD+B,eAAgB,WACVD,EAAQ,GACV7B,EAASxC,EAAc,OAAQqE,EAAOA,EAAQ,KAGlDE,eAAgB,kBAAM/B,EAASxC,EAAc,OAAQqE,EAAOA,EAAQ,OAZtD/B,CArEL,SAAA9B,GAUP,IATJ+B,EASI/B,EATJ+B,GASIiC,GAAAhE,EARJ6D,MAQI7D,EAPJQ,cAOI,IAAAwD,EAPI,GAOJA,EAAA9B,EAAAlC,EANJmC,YAMI,IAAAD,EANG,GAMHA,EAAA+B,EAAAjE,EALJkE,kBAKI,IAAAD,EALS,GAKTA,EAJJ1E,EAIIS,EAJJT,KACAF,EAGIW,EAHJX,OACAyE,EAEI9D,EAFJ8D,eACAC,EACI/D,EADJ+D,eAEMI,EAAgB9B,sBAAY,SAAAC,GAAC,OAAI/C,EAAK,CAAEiB,MAAO8B,EAAEC,OAAOC,UACxDJ,EAAeC,sBAAY,SAAAC,GAAC,OAAI/C,EAAK,CAAE4C,KAAMG,EAAEC,OAAOC,UAE5D,OACE9B,EAAAC,EAAAC,cAACwD,EAAA,KAAD,KACE1D,EAAAC,EAAAC,cAACwD,EAAA,KAAKC,QAAN,KACE3D,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC0D,EAAD,CAAQlD,QAAS0C,IACjBpD,EAAAC,EAAAC,cAAC2D,EAAD,CAAUnD,QAAS2C,IACnBrD,EAAAC,EAAAC,cAACiC,EAAD,CACEzB,QAAS/B,EACTwB,MAAO,CACLiC,SAAU,WACV0B,MAAO,EACPC,YAAa,OAKnB/D,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC2C,EAAD,KACE7C,EAAAC,EAAAC,cAAC6C,EAAD,cACA/C,EAAAC,EAAAC,cAAC8C,EAAD,KACEhD,EAAAC,EAAAC,cAAC+C,EAAD,CACEe,KAAK,OACLhC,YAAW,UAAAiC,OAAY5C,EAAZ,KACXS,MAAOhC,EACPiC,SAAU0B,OAMlBzD,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC2C,EAAD,KACE7C,EAAAC,EAAAC,cAAC6C,EAAD,aACA/C,EAAAC,EAAAC,cAAC8C,EAAD,KACEhD,EAAAC,EAAAC,cAACgD,EAAD,CACEgB,KAAK,OACLlC,YAAY,OACZF,MAAOL,EACPM,SAAUL,OAMlB1B,EAAAC,EAAAC,cAAA,WAEAF,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAAEgE,WAAY,KACxBnE,EAAAC,EAAAC,cAACkE,EAAD,CAAU3B,IAAKe,EAAYnB,OAAQhB,SCtC9BF,EATGC,YAChB,SAAA/B,GAAK,MAAK,CACRoD,IAAKrD,EAAaC,EAAO,CAAEE,WAAY,WAEzC,SAAA+B,GAAQ,MAAK,CACX+C,QAAS,kBAAM/C,EAAS9C,EAAU,OAAQ+D,WAL5BnB,CAhBJ,SAAA9B,GAA2B,IAAAkD,EAAAlD,EAAxBmD,WAAwB,IAAAD,EAAlB,GAAkBA,EAAd6B,EAAc/E,EAAd+E,QACzB,OACErE,EAAAC,EAAAC,cAACoE,EAAD,CAAaxE,MAAM,QAChB2C,EAAIC,IAAI,SAACrB,EAAI8B,GAAL,OACPnD,EAAAC,EAAAC,cAACqE,EAAD,CAAM3B,IAAKvB,EAAIA,GAAIA,EAAI8B,MAAOA,MAGhCnD,EAAAC,EAAAC,cAACwD,EAAA,OAAD,CACEhD,QAAS2D,EACTG,WAAW,EACXC,MAAM,QAHR,eCHSrD,cACb,SAAA/B,GAAK,MAAK,CAAEA,MAAOA,EAAMF,QADZiC,CARD,SAAA9B,GAAe,IAAZD,EAAYC,EAAZD,MACf,OACEW,EAAAC,EAAAC,cAACoE,EAAD,CAAaxE,MAAM,SACjBE,EAAAC,EAAAC,cAAA,WAAMwE,KAAKC,UAAL/D,OAAAC,EAAA,EAAAD,CAAA,GAAoBvB,GAAS,KAAM,OCehC+B,cACb,SAAA/B,GAAK,MAAK,CAAEF,MAAOE,EAAMF,QADZiC,CAfC,SAAA9B,GAAeA,EAAZH,MACjB,OACEa,EAAAC,EAAAC,cAACwD,EAAA,UAAD,KACE1D,EAAAC,EAAAC,cAACwD,EAAA,QAAD,KACE1D,EAAAC,EAAAC,cAACwD,EAAA,QAAQkB,OAAT,KACE5E,EAAAC,EAAAC,cAAC2E,EAAD,OAEF7E,EAAAC,EAAAC,cAACwD,EAAA,QAAQkB,OAAT,KACE5E,EAAAC,EAAAC,cAAC4E,EAAD,WCRJC,ECLS,SAAC9F,GAA+B,IAAtB+F,EAAsBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAP,GACtC,OAAOG,sBACLnG,EACA+F,EACAK,8BAAoBC,kBAAgBC,aAAY,MDCtCH,CAAYnG,GAUXuG,EARE,WACf,OACExF,EAAAC,EAAAC,cAACuF,EAAA,EAAD,CAAUV,MAAOA,GACf/E,EAAAC,EAAAC,cAACwF,EAAD,QEDSC,mLANX,OACE3F,EAAAC,EAAAC,cAAC0F,EAAD,aAHYC,mBCClBC,IAASC,OAAO/F,EAAAC,EAAAC,cAAC8F,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.15a3d5bc.chunk.js","sourcesContent":["\nexport const modelSchema = {\n  post: {\n    many: ['comment']\n  },\n  comment: {\n    one: ['post']\n  }\n};","import { combineReducers } from 'redux';\nimport { modelSchema } from './schema';\nimport {\n  createReducer,\n  createActions,\n  selectors\n} from 'relational-entities-reducer';\n\n/* ACTIONS */\nconst modelActions = createActions(modelSchema);\nexport const addEntity = modelActions.add;\nexport const removeEntity = modelActions.remove;\nexport const editEntity = modelActions.edit;\nexport const reorderEntity = modelActions.reorderEntity;\n\n/* REDUCER */\nconst modelReducer = createReducer(modelSchema, modelActions);\n\nexport const reducer = combineReducers({\n  model: modelReducer\n});\n\n/* SELECTORS */\nexport const getEntityIds = (state, { entityType }) => {\n  return selectors.getIds(state.model, { entityType });\n};\n\nexport const getEntity = (state, { entityType, entityId }) => {\n  return selectors.getEntity(state.model, { entityType, entityId });\n};","import React from 'react';\n\nconst FixedScroll = ({ title, children }) => {\n  const style = {\n    height: '90vh',\n    overflow: 'auto',\n    border: 'solid 1px #ccc'\n  };\n\n  return (\n    <div>\n      <h2>{title}</h2>\n\n      <div style={style}>\n        {children}\n      </div>\n    </div>\n  );\n};\n\nexport default FixedScroll","import React from 'react';\n\nconst defaultStyle = {\n  cursor: 'pointer'\n};\n\nexport const Remove = ({ onClick, style = {} }) =>\n  <span onClick={onClick} style={{ ...defaultStyle, ...style }}>×</span>;\n\nexport const MoveUp = ({ onClick, style = {} }) =>\n  <span onClick={onClick} style={{ ...defaultStyle, ...style }}>▲</span>;\n\nexport const MoveDown = ({ onClick, style = {} }) =>\n  <span onClick={onClick} style={{ ...defaultStyle, ...style }}>▼</span>;","import React, { useCallback } from 'react';\nimport { connect } from 'react-redux';\n\nimport { getEntity, editEntity, removeEntity } from '../state';\nimport { Remove } from './Icons';\n\nconst Comment = ({ id, body = '', edit, remove }) => {\n  const onChangeBody = useCallback(e => edit({ body: e.target.value }));\n\n  return (\n    <div>\n      <textarea\n        value={body}\n        onChange={onChangeBody}\n        placeholder=\"Comment\"\n        style={{ width: '50%', minHeight: 20, border: 'solid 1px #ddd' }}\n      />\n      <Remove\n        onClick={remove}\n        style={{ position: 'absolute' }}\n      />\n    </div>\n  );\n};\n\nconst Connected = connect(\n  (state, { id }) => ({\n    ...getEntity(state, { entityType: 'comment', entityId: id })\n  }),\n  (dispatch, { id }) => ({\n    edit: (changes) => dispatch(editEntity('comment', id, changes)),\n    remove: () => dispatch(removeEntity('comment', id))\n  })\n)(Comment);\n\nexport default Connected;","import React from 'react';\nimport { connect } from 'react-redux';\nimport uuid from 'uuid/v4';\n\nimport Comment from './Comment';\nimport { getEntityIds, addEntity } from '../state';\n\nconst Comments = ({ ids = [], addComment }) => {\n  return (\n    <div>\n      {ids.map(id => (\n        <Comment id={id} key={id} />\n      ))}\n\n      <button onClick={addComment}>New Comment</button>\n    </div>\n  );\n};\n\nconst Connected = connect(\n  null,\n  (dispatch, { postId }) => ({\n    addComment: () => dispatch(addEntity('comment', uuid(), { postId }))\n  })\n)(Comments);\n\nexport default Connected;","import React, { useCallback } from 'react';\nimport { connect } from 'react-redux';\nimport { Card, Form, Heading, Content } from 'react-bulma-components';\n\nimport { getEntity, editEntity, removeEntity, reorderEntity } from '../state';\nimport Comments from './Comments';\nimport { MoveUp, MoveDown, Remove } from './Icons';\n\nconst { Field, Label, Control, Input, Textarea } = Form;\n\nconst Post = ({\n  id,\n  index,\n  title = '',\n  body = '',\n  commentIds = [],\n  edit,\n  remove,\n  decrementIndex,\n  incrementIndex,\n}) => {\n  const onChangeTitle = useCallback(e => edit({ title: e.target.value }));\n  const onChangeBody = useCallback(e => edit({ body: e.target.value }));\n\n  return (\n    <Card>\n      <Card.Content>\n        <div>\n          <MoveUp onClick={decrementIndex}/>\n          <MoveDown onClick={incrementIndex}/>\n          <Remove\n            onClick={remove}\n            style={{\n              position: 'absolute',\n              right: 0,\n              marginRight: 20\n            }}\n          />\n        </div>\n\n        <div>\n          <Field>\n            <Label>Title</Label>\n            <Control>\n              <Input\n                type=\"text\"\n                placeholder={`Title (${id})`}\n                value={title}\n                onChange={onChangeTitle}\n              />\n            </Control>\n          </Field>\n        </div>\n\n        <div>\n          <Field>\n            <Label>Body</Label>\n            <Control>\n              <Textarea\n                name=\"body\"\n                placeholder=\"Body\"\n                value={body}\n                onChange={onChangeBody}\n              />\n            </Control>\n          </Field>\n        </div>\n\n        <hr/>\n\n        <label>Comments:</label>\n        <div style={{ marginLeft: 20 }}>\n          <Comments ids={commentIds} postId={id}/>\n        </div>\n      </Card.Content>\n    </Card>\n  );\n};\n\nconst Connected = connect(\n  (state, { id }) => ({\n    ...getEntity(state, { entityType: 'post', entityId: id })\n  }),\n  (dispatch, { id, index }) => ({\n    edit: (changes) => dispatch(editEntity('post', id, changes)),\n    remove: () => dispatch(removeEntity('post', id, ['comment'])),\n    decrementIndex: () => {\n      if (index > 0) {\n        dispatch(reorderEntity('post', index, index - 1))\n      }\n    },\n    incrementIndex: () => dispatch(reorderEntity('post', index, index + 1))\n  })\n)(Post);\n\nexport default Connected;","import React from 'react';\nimport { connect } from 'react-redux';\nimport uuid from 'uuid/v4';\nimport { Button } from 'react-bulma-components';\n\nimport FixedScroll from './FixedScroll';\nimport Post from './Post';\nimport { getEntityIds, addEntity } from '../state';\n\nconst Posts = ({ ids = [], addPost }) => {\n  return (\n    <FixedScroll title=\"View\">\n      {ids.map((id, index) => (\n        <Post key={id} id={id} index={index} />\n      ))}\n\n      <Button\n        onClick={addPost}\n        fullwidth={true}\n        color=\"info\"\n      >New Post</Button>\n    </FixedScroll>\n  );\n};\n\nconst Connected = connect(\n  state => ({\n    ids: getEntityIds(state, { entityType: 'post' })\n  }),\n  dispatch => ({\n    addPost: () => dispatch(addEntity('post', uuid()))\n  })\n)(Posts);\n\nexport default Connected;","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport FixedScroll from './FixedScroll';\n\nconst State = ({ state }) => {\n  return (\n    <FixedScroll title=\"State\">\n      <pre>{JSON.stringify({ ...state }, null, 2)}</pre>\n    </FixedScroll>\n  );\n};\n\nexport default connect(\n  state => ({ state: state.model })\n)(State)","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Columns, Container, Header } from 'react-bulma-components';\n\nimport Posts from './Posts';\nimport State from './State';\n\n\nconst Example = ({ model }) => {\n  return (\n    <Container>\n      <Columns>\n        <Columns.Column>\n          <Posts/>\n        </Columns.Column>\n        <Columns.Column>\n          <State/>\n        </Columns.Column>\n      </Columns>\n    </Container>\n  );\n};\n\nexport default connect(\n  state => ({ model: state.model })\n)(Example);","import React from 'react';\nimport { Provider } from 'react-redux';\n\nimport createStore from '../store';\nimport { reducer } from './state';\nimport { data } from './data';\nimport Example from './dom/Example';\n\nconst store = createStore(reducer);\n\nconst Example1 = () => {\n  return (\n    <Provider store={store}>\n      <Example/>\n    </Provider>\n  );\n};\n\nexport default Example1;","import { createStore, applyMiddleware } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\n\nexport default (reducer, initialState = {}) => {\n  return createStore(\n    reducer,\n    initialState,\n    composeWithDevTools(applyMiddleware.apply(this, []))\n  );\n}\n","import React, { Component } from 'react';\n\nimport Example1 from './example1';\n\nclass App extends Component {\n  render() {\n    return (\n      <Example1/>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'react-bulma-components/dist/react-bulma-components.min.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}